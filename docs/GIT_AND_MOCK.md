# Git 操作和模拟数据功能说明

## Git 仓库设置

已成功初始化 Git 仓库并创建了两次提交:

### 提交历史

```bash
18ead90 (HEAD -> main) feat: 添加模拟数据支持和可手动停止的录制功能
72b3019 Initial commit: 心理测评系统前端完整实现
```

### 第一次提交 (72b3019)
**Initial commit: 心理测评系统前端完整实现**

包含内容:
- 完整的 Vue 3 项目结构
- 所有核心组件 (6个)
- 工具函数 (PDF导出、视频转换)
- API 配置
- 项目配置文件

### 第二次提交 (18ead90)
**feat: 添加模拟数据支持和可手动停止的录制功能**

主要变更:
- ✅ 新增 `src/api/mockData.js` - 模拟心理测评数据
- ✅ 修改 `src/api/index.js` - 支持 mock 模式
- ✅ 修改 `src/components/RecordingPanel.vue` - 可手动停止录制
- ✅ 整理文档到 `docs/` 目录

## 模拟数据功能

### 启用/禁用 Mock 模式

在 `src/api/index.js` 中修改 `USE_MOCK` 常量:

```javascript
// Set to true to use mock data (for testing without backend)
const USE_MOCK = true  // 改为 false 使用真实后端
```

### Mock 数据内容

模拟数据包含完整的大五人格测评结果:

- **宜人性 (BIG_A)**: 57分 - 高宜人性
- **尽责性 (BIG_C)**: 60分 - 高尽责性
- **外倾性 (BIG_E)**: 54分 - 高外倾性
- **神经质 (BIG_N)**: 40分 - 高神经质
- **开放性 (BIG_O)**: 40分 - 较高开放性

每个维度包含:
- `score`: 0-1 的得分
- `raw_score`: 原始分数
- `result`: 结果标签
- `interpretation`: 详细解释文字
- `dimension_name`: 维度名称

### Mock 模式特点

1. **无需后端**: 可以完全离线测试前端功能
2. **模拟延迟**: 2秒的模拟网络延迟,更真实
3. **完整数据**: 包含所有5个维度的详细分析
4. **控制台提示**: 使用 mock 时会在控制台输出提示

## 录制功能改进

### 原功能 (固定40秒)
- ❌ 固定录制40秒
- ❌ 无法提前停止
- ❌ 测试不便

### 新功能 (可手动停止)
- ✅ 可随时停止录制
- ✅ 最少录制3秒 (防止误操作)
- ✅ 实时显示已录制时间
- ✅ 按钮在3秒内禁用,之后启用

### 界面变化

**之前:**
```
进度条: ████████░░░░ 剩余 28 秒
```

**现在:**
```
已录制 5 秒  [停止录制并上传]
```

### 使用说明

1. 录制开始后,计时器开始计数
2. 前3秒按钮显示: "请至少录制 X 秒" (禁用状态)
3. 3秒后按钮变为: "停止录制并上传" (启用状态)
4. 点击按钮立即停止录制并上传

## 测试验证

### 已完成的测试

✅ **完整流程测试**:
1. 引导弹窗正常显示
2. 3秒倒计时正常运行
3. 录制页面显示正确:
   - 阅读材料文本
   - 摄像头预览
   - 录制指示灯
   - 计时器
   - 停止按钮
4. Mock 上传成功 (2秒延迟)
5. 报告页面正确显示:
   - 雷达图 (5个维度)
   - 详细分析卡片
   - 导出PDF按钮
   - 重新测评按钮

### 测试结果

- ✅ Mock 数据正常工作
- ✅ 手动停止功能正常
- ✅ 3秒最小录制时间限制有效
- ✅ 报告展示完整准确
- ✅ UI 简洁,无多余装饰

## Git 常用命令

### 查看状态
```bash
git status
```

### 查看提交历史
```bash
git log --oneline
```

### 查看具体改动
```bash
git show 18ead90
```

### 创建新分支
```bash
git checkout -b feature/new-feature
```

### 切换回主分支
```bash
git checkout main
```

## 下一步建议

### 开发阶段
1. 保持 `USE_MOCK = true` 进行前端开发和测试
2. 完善 UI 细节和用户体验
3. 添加更多错误处理

### 集成测试阶段
1. 将 `USE_MOCK` 改为 `false`
2. 连接真实后端 API
3. 测试完整的录制-上传-分析流程
4. 验证真实数据的展示

### 生产部署
1. 确保 `USE_MOCK = false`
2. 配置正确的后端地址
3. 运行 `npm run build`
4. 部署到 http://159.226.113.201:20053/

## 文件组织

```
VideoFront/
├── docs/                    # 文档目录 (新增)
│   ├── FrontTech.md        # 技术方案
│   ├── PRD.md              # 产品需求
│   ├── tasks.md            # 任务列表
│   └── ...
├── src/
│   ├── api/
│   │   ├── index.js        # API (支持 mock)
│   │   └── mockData.js     # Mock 数据 (新增)
│   └── components/
│       └── RecordingPanel.vue  # 可手动停止 (修改)
└── .gitignore              # Git 忽略文件 (新增)
```

## 总结

✅ **Git 仓库**: 已初始化,包含2次有意义的提交
✅ **Mock 数据**: 完整的模拟数据,支持离线测试
✅ **录制功能**: 改为可手动停止,最少3秒
✅ **测试验证**: 完整流程测试通过
✅ **文档整理**: 所有文档移至 docs 目录

现在可以方便地进行前端开发和测试,无需依赖后端服务!
